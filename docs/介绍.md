## 为什么要做ssr
- 有利于seo  
- 秒开首屏  
- 提高用户体验  
- 降低代码复杂度？  

## 理解
webapck配置、路由、项目目录结构、动态加载以及更细化的babel、postcss配置等，这类东西用户定制化程度高，应该将权利给予用户去做，框架不应该承担这种多样化的东西，无论是使用next还是北斗等，都对以上有侵入性的改变且使用起来过重，对于大型项目，这些东西不应该被限制，如果你不是一开始就使用它们，迁移成本会很高  
但其实我们想要的只是核心渲染，路由、项目结构、配置这些你可以提供但不能限制我的发挥！  

### next issue统计
截止到2018年12月14日，针对next issue相关关键字的统计分析，可以看出webpack和babel相关的issue占比很高，很容易明白其中的原因，这类东西用户定制化程度很高，next提供的配置无法覆盖所有情况，真实的配置只有用户自己最清楚，且最终的配置修改权在用户手中，有时候可能用户都不知道是修改了哪行关键配置导致next跑不起来，也很难排查解决  

| 关键词 | Open | Closed |
| ----- | ---- | ------ |
| - | 290 | 3084 |
| webpack | 95 | 1030 |
| babel | 60 | 870 |

## 目标
我的初衷是用最小代价的引入ssr，让开发者无感切入，遵从一点约束，不用改动webpbak、babel配置，及业务代码  
且客户端能跑，服务端也能跑，即使不开启ssr，可随时关闭ssr，如同开关一样  
对基于react和webpack的项目做服务端渲染时提供支持  

### 想法
为什么要自己撸一套ssr，写逻辑哪有造轮子好玩？  
我就只是想访问页面时服务器端返回一下渲染好的页面，之后正常走客户端逻辑，为何要我作出这么多改变  
这个问题是什么原因啊，只有看了源码后才知道，文档竟然也没说明  
为何开发体验这么差，开发模式打包速度如此的慢  

### 用户使用
用户使用我提供的webpack函数传入自己的webpack配置，这里我会更改用户webpack的关键配置，以支持ssr，用户无感且无权介入  
用户通过中间的形式引入ssr中件间服务  
用户自由开启webpack和koa服务，我并不提供启动运行命令  
把这些自由的操作都交给用户，webpack、babel、服务、cli、文件结构等  

### 资源引用
返回渲染的html模版来自html-webpack-plugin插件生成的html文件，我在此基础上加工  
资源通过介入的webpack插件打出的资源清单以分析出依赖关系，同时供服务端和客户端使用  
编写node端webpack运行时，处理webpack打包的chunk文件和模块加载，收集当前页面需要的资源，服务端require导入，客户端通过在生成html时将用到的chunk注入到html中  
